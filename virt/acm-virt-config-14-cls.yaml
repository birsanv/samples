apiVersion: v1
kind: ConfigMap
metadata:
  name: acm-virt-config-14-cls
data:

  ###### Configuration for the acm-virt-policy policy ###
  ########################################################

  # backupNS is the ns where velero/oadp is installed on the cluster
  backupNS: vm-backup-test
  channel: stable-1.4
  scheduleTTL: 24h
  # define the schedules to be used by the vm backup; schedule_hub_config_name is the name of the configmap defining all the 
  # supported cron job definitions
  # you should define a ConfigMap named schedule-cron and set values such as : daily_8am: 0 8 * * *
  schedule_hub_config_name: "schedule-cron"
  ##
  schedulePaused: "false"
  # credentials_hub_secret_name is the name of the Secret resource used by the OADP DPA resource to connect to the storage location
  # hub-secret must be a Secret available under the acm-virt-config namespace. It will be copied over to the backup cluster by the policy
  credentials_hub_secret_name: "hub-secret"
  credentials_name: "cloud-credentials"
  # only VMs with the backup_label_name label will be backed up
  backup_label_name: "cluster.open-cluster-management.io/backup-vm"
  dpa_name: dpa-hub
  dpa_spec: "{
  \"backupLocations\": [
    {
      \"velero\": {
        \"config\": {
          \"profile\": \"default\",
          \"region\": \"us-east-1\"
        },
        \"credential\": {
          \"key\": \"cloud\",
          \"name\": \"cloud-credentials\"
        },
        \"default\": true,
        \"objectStorage\": {
          \"bucket\": \"vb-velero-backup\",
          \"prefix\": \"hub-a\"
        },
        \"provider\": \"aws\"
      }
    }
  ],
  \"configuration\": {
    \"nodeAgent\": {
      \"enable\": true,
      \"uploaderType\": \"kopia\"
    },
    \"velero\": {
      \"defaultPlugins\": [
        \"csi\",       
        \"openshift\",
        \"kubevirt\",
        \"aws\"
      ],
      \"podConfig\": {
        \"resourceAllocations\": {
          \"limits\": {
            \"cpu\": \"1\",
            \"memory\": \"256Mi\"
          },
          \"requests\": {
            \"cpu\": \"200m\",
            \"memory\": \"256Mi\"
          }
        }
      }
    }
  },
}"